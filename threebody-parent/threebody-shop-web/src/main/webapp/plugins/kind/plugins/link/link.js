KindEditor.plugin("link",function(n){var a=this,d="link";a.plugin.link={edit:function(){var e=a.lang(d+"."),l='<div style="padding:20px;"><div class="ke-dialog-row"><label for="keUrl" style="width:60px;">'+e.url+'</label><input class="ke-input-text" type="text" id="keUrl" name="url" value="" style="width:260px;" /></div><div class="ke-dialog-row""><label for="keType" style="width:60px;">'+e.linkType+'</label><select id="keType" name="type"></select></div></div>',l=a.createDialog({name:d,width:450,title:a.lang(d),body:l,yesBtn:{name:a.lang("yes"),click:function(){var e=n.trim(t.val());("http://"==e||n.invalidUrl(e)?t[0]:a.exec("createlink",e,i.val()).hideDialog()).focus()}}}).div,t=n('input[name="url"]',l),i=n('select[name="type"]',l);t.val("http://"),i[0].options[0]=new Option(e.newWindow,"_blank"),i[0].options[1]=new Option(e.selfWindow,""),a.cmd.selection();e=a.plugin.getSelectedLink();e&&(a.cmd.range.selectNode(e[0]),a.cmd.select(),t.val(e.attr("data-ke-src")),i.val(e.attr("target"))),t[0].focus(),t[0].select()},delete:function(){a.exec("unlink",null)}},a.clickToolbar(d,a.plugin.link.edit)});